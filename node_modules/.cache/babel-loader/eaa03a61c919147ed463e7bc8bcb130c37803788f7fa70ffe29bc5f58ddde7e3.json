{"ast":null,"code":"// src/popover.anatomy.ts\nimport { createAnatomy } from \"@zag-js/anatomy\";\nvar anatomy = createAnatomy(\"popover\").parts(\"arrow\", \"arrowTip\", \"anchor\", \"trigger\", \"indicator\", \"positioner\", \"content\", \"title\", \"description\", \"closeTrigger\");\nvar parts = anatomy.build();\n\n// src/popover.connect.ts\nimport { dataAttr } from \"@zag-js/dom-query\";\nimport { getPlacementStyles } from \"@zag-js/popper\";\n\n// src/popover.dom.ts\nimport { createScope, getFocusables } from \"@zag-js/dom-query\";\nvar dom = createScope({\n  getAnchorId: ctx => ctx.ids?.anchor ?? `popover:${ctx.id}:anchor`,\n  getTriggerId: ctx => ctx.ids?.trigger ?? `popover:${ctx.id}:trigger`,\n  getContentId: ctx => ctx.ids?.content ?? `popover:${ctx.id}:content`,\n  getPositionerId: ctx => ctx.ids?.positioner ?? `popover:${ctx.id}:popper`,\n  getArrowId: ctx => ctx.ids?.arrow ?? `popover:${ctx.id}:arrow`,\n  getTitleId: ctx => ctx.ids?.title ?? `popover:${ctx.id}:title`,\n  getDescriptionId: ctx => ctx.ids?.description ?? `popover:${ctx.id}:desc`,\n  getCloseTriggerId: ctx => ctx.ids?.closeTrigger ?? `popover:${ctx.id}:close`,\n  getAnchorEl: ctx => dom.getById(ctx, dom.getAnchorId(ctx)),\n  getTriggerEl: ctx => dom.getById(ctx, dom.getTriggerId(ctx)),\n  getContentEl: ctx => dom.getById(ctx, dom.getContentId(ctx)),\n  getPositionerEl: ctx => dom.getById(ctx, dom.getPositionerId(ctx)),\n  getTitleEl: ctx => dom.getById(ctx, dom.getTitleId(ctx)),\n  getDescriptionEl: ctx => dom.getById(ctx, dom.getDescriptionId(ctx)),\n  getFocusableEls: ctx => getFocusables(dom.getContentEl(ctx)),\n  getFirstFocusableEl: ctx => dom.getFocusableEls(ctx)[0]\n});\n\n// src/popover.connect.ts\nfunction connect(state, send, normalize) {\n  const open = state.matches(\"open\");\n  const currentPlacement = state.context.currentPlacement;\n  const portalled = state.context.currentPortalled;\n  const rendered = state.context.renderedElements;\n  const popperStyles = getPlacementStyles({\n    ...state.context.positioning,\n    placement: currentPlacement\n  });\n  return {\n    portalled,\n    open,\n    setOpen(nextOpen) {\n      if (nextOpen === open) return;\n      send(nextOpen ? \"OPEN\" : \"CLOSE\");\n    },\n    reposition(options = {}) {\n      send({\n        type: \"POSITIONING.SET\",\n        options\n      });\n    },\n    getArrowProps() {\n      return normalize.element({\n        id: dom.getArrowId(state.context),\n        ...parts.arrow.attrs,\n        dir: state.context.dir,\n        style: popperStyles.arrow\n      });\n    },\n    getArrowTipProps() {\n      return normalize.element({\n        ...parts.arrowTip.attrs,\n        dir: state.context.dir,\n        style: popperStyles.arrowTip\n      });\n    },\n    getAnchorProps() {\n      return normalize.element({\n        ...parts.anchor.attrs,\n        dir: state.context.dir,\n        id: dom.getAnchorId(state.context)\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: state.context.dir,\n        type: \"button\",\n        \"data-placement\": currentPlacement,\n        id: dom.getTriggerId(state.context),\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"aria-controls\": dom.getContentId(state.context),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          send(\"TOGGLE\");\n        },\n        onBlur(event) {\n          send({\n            type: \"TRIGGER_BLUR\",\n            target: event.relatedTarget\n          });\n        }\n      });\n    },\n    getIndicatorProps() {\n      return normalize.element({\n        ...parts.indicator.attrs,\n        dir: state.context.dir,\n        \"data-state\": open ? \"open\" : \"closed\"\n      });\n    },\n    getPositionerProps() {\n      return normalize.element({\n        id: dom.getPositionerId(state.context),\n        ...parts.positioner.attrs,\n        dir: state.context.dir,\n        style: popperStyles.floating\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        dir: state.context.dir,\n        id: dom.getContentId(state.context),\n        tabIndex: -1,\n        role: \"dialog\",\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-expanded\": dataAttr(open),\n        \"aria-labelledby\": rendered.title ? dom.getTitleId(state.context) : void 0,\n        \"aria-describedby\": rendered.description ? dom.getDescriptionId(state.context) : void 0,\n        \"data-placement\": currentPlacement\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: dom.getTitleId(state.context),\n        dir: state.context.dir\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: dom.getDescriptionId(state.context),\n        dir: state.context.dir\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.button({\n        ...parts.closeTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getCloseTriggerId(state.context),\n        type: \"button\",\n        \"aria-label\": \"close\",\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          send(\"CLOSE\");\n        }\n      });\n    }\n  };\n}\n\n// src/popover.machine.ts\nimport { ariaHidden } from \"@zag-js/aria-hidden\";\nimport { createMachine } from \"@zag-js/core\";\nimport { trackDismissableElement } from \"@zag-js/dismissable\";\nimport { getInitialFocus, nextTick, proxyTabFocus, raf } from \"@zag-js/dom-query\";\nimport { getPlacement } from \"@zag-js/popper\";\nimport { preventBodyScroll } from \"@zag-js/remove-scroll\";\nimport { compact } from \"@zag-js/utils\";\nimport { createFocusTrap } from \"focus-trap\";\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine({\n    id: \"popover\",\n    initial: ctx.open ? \"open\" : \"closed\",\n    context: {\n      closeOnInteractOutside: true,\n      closeOnEscape: true,\n      autoFocus: true,\n      modal: false,\n      portalled: true,\n      positioning: {\n        placement: \"bottom\",\n        ...ctx.positioning\n      },\n      currentPlacement: void 0,\n      ...ctx,\n      renderedElements: {\n        title: true,\n        description: true\n      }\n    },\n    computed: {\n      currentPortalled: ctx2 => !!ctx2.modal || !!ctx2.portalled\n    },\n    watch: {\n      open: [\"toggleVisibility\"]\n    },\n    entry: [\"checkRenderedElements\"],\n    states: {\n      closed: {\n        on: {\n          \"CONTROLLED.OPEN\": {\n            target: \"open\",\n            actions: [\"setInitialFocus\"]\n          },\n          TOGGLE: [{\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnOpen\"]\n          }, {\n            target: \"open\",\n            actions: [\"invokeOnOpen\", \"setInitialFocus\"]\n          }],\n          OPEN: [{\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnOpen\"]\n          }, {\n            target: \"open\",\n            actions: [\"invokeOnOpen\", \"setInitialFocus\"]\n          }]\n        }\n      },\n      open: {\n        activities: [\"trapFocus\", \"preventScroll\", \"hideContentBelow\", \"trackPositioning\", \"trackDismissableElement\", \"proxyTabFocus\"],\n        on: {\n          \"CONTROLLED.CLOSE\": {\n            target: \"closed\",\n            actions: [\"setFinalFocus\"]\n          },\n          CLOSE: [{\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          }, {\n            target: \"closed\",\n            actions: [\"invokeOnClose\", \"setFinalFocus\"]\n          }],\n          TOGGLE: [{\n            guard: \"isOpenControlled\",\n            actions: [\"invokeOnClose\"]\n          }, {\n            target: \"closed\",\n            actions: [\"invokeOnClose\"]\n          }],\n          \"POSITIONING.SET\": {\n            actions: \"reposition\"\n          }\n        }\n      }\n    }\n  }, {\n    guards: {\n      isOpenControlled: ctx2 => !!ctx2[\"open.controlled\"]\n    },\n    activities: {\n      trackPositioning(ctx2) {\n        ctx2.currentPlacement = ctx2.positioning.placement;\n        const anchorEl = dom.getAnchorEl(ctx2) ?? dom.getTriggerEl(ctx2);\n        const getPositionerEl = () => dom.getPositionerEl(ctx2);\n        return getPlacement(anchorEl, getPositionerEl, {\n          ...ctx2.positioning,\n          defer: true,\n          onComplete(data) {\n            ctx2.currentPlacement = data.placement;\n          }\n        });\n      },\n      trackDismissableElement(ctx2, _evt, {\n        send\n      }) {\n        const getContentEl = () => dom.getContentEl(ctx2);\n        let restoreFocus = true;\n        return trackDismissableElement(getContentEl, {\n          pointerBlocking: ctx2.modal,\n          exclude: dom.getTriggerEl(ctx2),\n          defer: true,\n          onEscapeKeyDown(event) {\n            ctx2.onEscapeKeyDown?.(event);\n            if (ctx2.closeOnEscape) return;\n            event.preventDefault();\n          },\n          onInteractOutside(event) {\n            ctx2.onInteractOutside?.(event);\n            if (event.defaultPrevented) return;\n            restoreFocus = !(event.detail.focusable || event.detail.contextmenu);\n            if (!ctx2.closeOnInteractOutside) {\n              event.preventDefault();\n            }\n          },\n          onPointerDownOutside: ctx2.onPointerDownOutside,\n          onFocusOutside: ctx2.onFocusOutside,\n          persistentElements: ctx2.persistentElements,\n          onDismiss() {\n            send({\n              type: \"CLOSE\",\n              src: \"interact-outside\",\n              restoreFocus\n            });\n          }\n        });\n      },\n      proxyTabFocus(ctx2) {\n        if (ctx2.modal || !ctx2.portalled) return;\n        const getContentEl = () => dom.getContentEl(ctx2);\n        return proxyTabFocus(getContentEl, {\n          triggerElement: dom.getTriggerEl(ctx2),\n          defer: true,\n          onFocus(el) {\n            el.focus({\n              preventScroll: true\n            });\n          }\n        });\n      },\n      hideContentBelow(ctx2) {\n        if (!ctx2.modal) return;\n        const getElements = () => [dom.getContentEl(ctx2), dom.getTriggerEl(ctx2)];\n        return ariaHidden(getElements, {\n          defer: true\n        });\n      },\n      preventScroll(ctx2) {\n        if (!ctx2.modal) return;\n        return preventBodyScroll(dom.getDoc(ctx2));\n      },\n      trapFocus(ctx2) {\n        if (!ctx2.modal) return;\n        let trap;\n        nextTick(() => {\n          const contentEl = dom.getContentEl(ctx2);\n          if (!contentEl) return;\n          trap = createFocusTrap(contentEl, {\n            escapeDeactivates: false,\n            allowOutsideClick: true,\n            preventScroll: true,\n            returnFocusOnDeactivate: true,\n            document: dom.getDoc(ctx2),\n            fallbackFocus: contentEl,\n            initialFocus: getInitialFocus({\n              root: dom.getContentEl(ctx2),\n              getInitialEl: ctx2.initialFocusEl,\n              enabled: ctx2.autoFocus\n            })\n          });\n          try {\n            trap.activate();\n          } catch {}\n        });\n        return () => trap?.deactivate();\n      }\n    },\n    actions: {\n      reposition(ctx2, evt) {\n        const anchorEl = dom.getAnchorEl(ctx2) ?? dom.getTriggerEl(ctx2);\n        const getPositionerEl = () => dom.getPositionerEl(ctx2);\n        getPlacement(anchorEl, getPositionerEl, {\n          ...ctx2.positioning,\n          ...evt.options,\n          defer: true,\n          listeners: false,\n          onComplete(data) {\n            ctx2.currentPlacement = data.placement;\n          }\n        });\n      },\n      checkRenderedElements(ctx2) {\n        raf(() => {\n          Object.assign(ctx2.renderedElements, {\n            title: !!dom.getTitleEl(ctx2),\n            description: !!dom.getDescriptionEl(ctx2)\n          });\n        });\n      },\n      setInitialFocus(ctx2) {\n        if (ctx2.modal) return;\n        raf(() => {\n          const element = getInitialFocus({\n            root: dom.getContentEl(ctx2),\n            getInitialEl: ctx2.initialFocusEl,\n            enabled: ctx2.autoFocus\n          });\n          element?.focus({\n            preventScroll: true\n          });\n        });\n      },\n      setFinalFocus(ctx2, evt) {\n        if (!evt.restoreFocus) return;\n        raf(() => {\n          const element = dom.getTriggerEl(ctx2);\n          element?.focus({\n            preventScroll: true\n          });\n        });\n      },\n      invokeOnOpen(ctx2) {\n        ctx2.onOpenChange?.({\n          open: true\n        });\n      },\n      invokeOnClose(ctx2) {\n        ctx2.onOpenChange?.({\n          open: false\n        });\n      },\n      toggleVisibility(ctx2, evt, {\n        send\n      }) {\n        send({\n          type: ctx2.open ? \"CONTROLLED.OPEN\" : \"CONTROLLED.CLOSE\",\n          previousEvent: evt\n        });\n      }\n    }\n  });\n}\n\n// src/popover.props.ts\nimport { createProps } from \"@zag-js/types\";\nimport { createSplitProps } from \"@zag-js/utils\";\nvar props = createProps()([\"autoFocus\", \"closeOnEscape\", \"closeOnInteractOutside\", \"dir\", \"getRootNode\", \"id\", \"ids\", \"initialFocusEl\", \"modal\", \"onEscapeKeyDown\", \"onFocusOutside\", \"onInteractOutside\", \"onOpenChange\", \"onPointerDownOutside\", \"open.controlled\", \"open\", \"persistentElements\", \"portalled\", \"positioning\"]);\nvar splitProps = createSplitProps(props);\nexport { anatomy, connect, machine, props, splitProps };","map":{"version":3,"names":["createAnatomy","anatomy","parts","build","dataAttr","getPlacementStyles","createScope","getFocusables","dom","getAnchorId","ctx","ids","anchor","id","getTriggerId","trigger","getContentId","content","getPositionerId","positioner","getArrowId","arrow","getTitleId","title","getDescriptionId","description","getCloseTriggerId","closeTrigger","getAnchorEl","getById","getTriggerEl","getContentEl","getPositionerEl","getTitleEl","getDescriptionEl","getFocusableEls","getFirstFocusableEl","connect","state","send","normalize","open","matches","currentPlacement","context","portalled","currentPortalled","rendered","renderedElements","popperStyles","positioning","placement","setOpen","nextOpen","reposition","options","type","getArrowProps","element","attrs","dir","style","getArrowTipProps","arrowTip","getAnchorProps","getTriggerProps","button","onClick","event","defaultPrevented","onBlur","target","relatedTarget","getIndicatorProps","indicator","getPositionerProps","floating","getContentProps","tabIndex","role","hidden","getTitleProps","getDescriptionProps","getCloseTriggerProps","ariaHidden","createMachine","trackDismissableElement","getInitialFocus","nextTick","proxyTabFocus","raf","getPlacement","preventBodyScroll","compact","createFocusTrap","machine","userContext","initial","closeOnInteractOutside","closeOnEscape","autoFocus","modal","computed","ctx2","watch","entry","states","closed","on","actions","TOGGLE","guard","OPEN","activities","CLOSE","guards","isOpenControlled","trackPositioning","anchorEl","defer","onComplete","data","_evt","restoreFocus","pointerBlocking","exclude","onEscapeKeyDown","preventDefault","onInteractOutside","detail","focusable","contextmenu","onPointerDownOutside","onFocusOutside","persistentElements","onDismiss","src","triggerElement","onFocus","el","focus","preventScroll","hideContentBelow","getElements","getDoc","trapFocus","trap","contentEl","escapeDeactivates","allowOutsideClick","returnFocusOnDeactivate","document","fallbackFocus","initialFocus","root","getInitialEl","initialFocusEl","enabled","activate","deactivate","evt","listeners","checkRenderedElements","Object","assign","setInitialFocus","setFinalFocus","invokeOnOpen","onOpenChange","invokeOnClose","toggleVisibility","previousEvent","createProps","createSplitProps","props","splitProps"],"sources":["/Users/rishil/AIM-MedVisor/node_modules/@zag-js/popover/src/popover.anatomy.ts","/Users/rishil/AIM-MedVisor/node_modules/@zag-js/popover/src/popover.connect.ts","/Users/rishil/AIM-MedVisor/node_modules/@zag-js/popover/src/popover.dom.ts","/Users/rishil/AIM-MedVisor/node_modules/@zag-js/popover/src/popover.machine.ts","/Users/rishil/AIM-MedVisor/node_modules/@zag-js/popover/src/popover.props.ts"],"sourcesContent":["import { createAnatomy } from \"@zag-js/anatomy\"\n\nexport const anatomy = createAnatomy(\"popover\").parts(\n  \"arrow\",\n  \"arrowTip\",\n  \"anchor\",\n  \"trigger\",\n  \"indicator\",\n  \"positioner\",\n  \"content\",\n  \"title\",\n  \"description\",\n  \"closeTrigger\",\n)\n\nexport const parts = anatomy.build()\n","import { dataAttr } from \"@zag-js/dom-query\"\nimport { getPlacementStyles } from \"@zag-js/popper\"\nimport type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { parts } from \"./popover.anatomy\"\nimport { dom } from \"./popover.dom\"\nimport type { MachineApi, Send, State } from \"./popover.types\"\n\nexport function connect<T extends PropTypes>(state: State, send: Send, normalize: NormalizeProps<T>): MachineApi<T> {\n  const open = state.matches(\"open\")\n\n  const currentPlacement = state.context.currentPlacement\n  const portalled = state.context.currentPortalled\n  const rendered = state.context.renderedElements\n\n  const popperStyles = getPlacementStyles({\n    ...state.context.positioning,\n    placement: currentPlacement,\n  })\n\n  return {\n    portalled,\n    open: open,\n    setOpen(nextOpen) {\n      if (nextOpen === open) return\n      send(nextOpen ? \"OPEN\" : \"CLOSE\")\n    },\n    reposition(options = {}) {\n      send({ type: \"POSITIONING.SET\", options })\n    },\n\n    getArrowProps() {\n      return normalize.element({\n        id: dom.getArrowId(state.context),\n        ...parts.arrow.attrs,\n        dir: state.context.dir,\n        style: popperStyles.arrow,\n      })\n    },\n\n    getArrowTipProps() {\n      return normalize.element({\n        ...parts.arrowTip.attrs,\n        dir: state.context.dir,\n        style: popperStyles.arrowTip,\n      })\n    },\n\n    getAnchorProps() {\n      return normalize.element({\n        ...parts.anchor.attrs,\n        dir: state.context.dir,\n        id: dom.getAnchorId(state.context),\n      })\n    },\n\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: state.context.dir,\n        type: \"button\",\n        \"data-placement\": currentPlacement,\n        id: dom.getTriggerId(state.context),\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"aria-controls\": dom.getContentId(state.context),\n        onClick(event) {\n          if (event.defaultPrevented) return\n          send(\"TOGGLE\")\n        },\n        onBlur(event) {\n          send({ type: \"TRIGGER_BLUR\", target: event.relatedTarget })\n        },\n      })\n    },\n\n    getIndicatorProps() {\n      return normalize.element({\n        ...parts.indicator.attrs,\n        dir: state.context.dir,\n        \"data-state\": open ? \"open\" : \"closed\",\n      })\n    },\n\n    getPositionerProps() {\n      return normalize.element({\n        id: dom.getPositionerId(state.context),\n        ...parts.positioner.attrs,\n        dir: state.context.dir,\n        style: popperStyles.floating,\n      })\n    },\n\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        dir: state.context.dir,\n        id: dom.getContentId(state.context),\n        tabIndex: -1,\n        role: \"dialog\",\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-expanded\": dataAttr(open),\n        \"aria-labelledby\": rendered.title ? dom.getTitleId(state.context) : undefined,\n        \"aria-describedby\": rendered.description ? dom.getDescriptionId(state.context) : undefined,\n        \"data-placement\": currentPlacement,\n      })\n    },\n\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: dom.getTitleId(state.context),\n        dir: state.context.dir,\n      })\n    },\n\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: dom.getDescriptionId(state.context),\n        dir: state.context.dir,\n      })\n    },\n\n    getCloseTriggerProps() {\n      return normalize.button({\n        ...parts.closeTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getCloseTriggerId(state.context),\n        type: \"button\",\n        \"aria-label\": \"close\",\n        onClick(event) {\n          if (event.defaultPrevented) return\n          send(\"CLOSE\")\n        },\n      })\n    },\n  }\n}\n","import { createScope, getFocusables } from \"@zag-js/dom-query\"\nimport type { MachineContext as Ctx } from \"./popover.types\"\n\nexport const dom = createScope({\n  getAnchorId: (ctx: Ctx) => ctx.ids?.anchor ?? `popover:${ctx.id}:anchor`,\n  getTriggerId: (ctx: Ctx) => ctx.ids?.trigger ?? `popover:${ctx.id}:trigger`,\n  getContentId: (ctx: Ctx) => ctx.ids?.content ?? `popover:${ctx.id}:content`,\n  getPositionerId: (ctx: Ctx) => ctx.ids?.positioner ?? `popover:${ctx.id}:popper`,\n  getArrowId: (ctx: Ctx) => ctx.ids?.arrow ?? `popover:${ctx.id}:arrow`,\n  getTitleId: (ctx: Ctx) => ctx.ids?.title ?? `popover:${ctx.id}:title`,\n  getDescriptionId: (ctx: Ctx) => ctx.ids?.description ?? `popover:${ctx.id}:desc`,\n  getCloseTriggerId: (ctx: Ctx) => ctx.ids?.closeTrigger ?? `popover:${ctx.id}:close`,\n\n  getAnchorEl: (ctx: Ctx) => dom.getById(ctx, dom.getAnchorId(ctx)),\n  getTriggerEl: (ctx: Ctx) => dom.getById(ctx, dom.getTriggerId(ctx)),\n  getContentEl: (ctx: Ctx) => dom.getById(ctx, dom.getContentId(ctx)),\n  getPositionerEl: (ctx: Ctx) => dom.getById(ctx, dom.getPositionerId(ctx)),\n  getTitleEl: (ctx: Ctx) => dom.getById(ctx, dom.getTitleId(ctx)),\n  getDescriptionEl: (ctx: Ctx) => dom.getById(ctx, dom.getDescriptionId(ctx)),\n\n  getFocusableEls: (ctx: Ctx) => getFocusables(dom.getContentEl(ctx)),\n  getFirstFocusableEl: (ctx: Ctx) => dom.getFocusableEls(ctx)[0],\n})\n","import { ariaHidden } from \"@zag-js/aria-hidden\"\nimport { createMachine } from \"@zag-js/core\"\nimport { trackDismissableElement } from \"@zag-js/dismissable\"\nimport { getInitialFocus, nextTick, proxyTabFocus, raf } from \"@zag-js/dom-query\"\nimport { getPlacement } from \"@zag-js/popper\"\nimport { preventBodyScroll } from \"@zag-js/remove-scroll\"\nimport { compact } from \"@zag-js/utils\"\nimport { createFocusTrap, type FocusTrap } from \"focus-trap\"\nimport { dom } from \"./popover.dom\"\nimport type { MachineContext, MachineState, UserDefinedContext } from \"./popover.types\"\n\nexport function machine(userContext: UserDefinedContext) {\n  const ctx = compact(userContext)\n  return createMachine<MachineContext, MachineState>(\n    {\n      id: \"popover\",\n      initial: ctx.open ? \"open\" : \"closed\",\n      context: {\n        closeOnInteractOutside: true,\n        closeOnEscape: true,\n        autoFocus: true,\n        modal: false,\n        portalled: true,\n        positioning: {\n          placement: \"bottom\",\n          ...ctx.positioning,\n        },\n        currentPlacement: undefined,\n        ...ctx,\n        renderedElements: {\n          title: true,\n          description: true,\n        },\n      },\n\n      computed: {\n        currentPortalled: (ctx) => !!ctx.modal || !!ctx.portalled,\n      },\n\n      watch: {\n        open: [\"toggleVisibility\"],\n      },\n\n      entry: [\"checkRenderedElements\"],\n\n      states: {\n        closed: {\n          on: {\n            \"CONTROLLED.OPEN\": {\n              target: \"open\",\n              actions: [\"setInitialFocus\"],\n            },\n            TOGGLE: [\n              {\n                guard: \"isOpenControlled\",\n                actions: [\"invokeOnOpen\"],\n              },\n              {\n                target: \"open\",\n                actions: [\"invokeOnOpen\", \"setInitialFocus\"],\n              },\n            ],\n            OPEN: [\n              {\n                guard: \"isOpenControlled\",\n                actions: [\"invokeOnOpen\"],\n              },\n              {\n                target: \"open\",\n                actions: [\"invokeOnOpen\", \"setInitialFocus\"],\n              },\n            ],\n          },\n        },\n\n        open: {\n          activities: [\n            \"trapFocus\",\n            \"preventScroll\",\n            \"hideContentBelow\",\n            \"trackPositioning\",\n            \"trackDismissableElement\",\n            \"proxyTabFocus\",\n          ],\n          on: {\n            \"CONTROLLED.CLOSE\": {\n              target: \"closed\",\n              actions: [\"setFinalFocus\"],\n            },\n            CLOSE: [\n              {\n                guard: \"isOpenControlled\",\n                actions: [\"invokeOnClose\"],\n              },\n              {\n                target: \"closed\",\n                actions: [\"invokeOnClose\", \"setFinalFocus\"],\n              },\n            ],\n            TOGGLE: [\n              {\n                guard: \"isOpenControlled\",\n                actions: [\"invokeOnClose\"],\n              },\n              {\n                target: \"closed\",\n                actions: [\"invokeOnClose\"],\n              },\n            ],\n            \"POSITIONING.SET\": {\n              actions: \"reposition\",\n            },\n          },\n        },\n      },\n    },\n    {\n      guards: {\n        isOpenControlled: (ctx) => !!ctx[\"open.controlled\"],\n      },\n      activities: {\n        trackPositioning(ctx) {\n          ctx.currentPlacement = ctx.positioning.placement\n          const anchorEl = dom.getAnchorEl(ctx) ?? dom.getTriggerEl(ctx)\n          const getPositionerEl = () => dom.getPositionerEl(ctx)\n          return getPlacement(anchorEl, getPositionerEl, {\n            ...ctx.positioning,\n            defer: true,\n            onComplete(data) {\n              ctx.currentPlacement = data.placement\n            },\n          })\n        },\n        trackDismissableElement(ctx, _evt, { send }) {\n          const getContentEl = () => dom.getContentEl(ctx)\n          let restoreFocus = true\n          return trackDismissableElement(getContentEl, {\n            pointerBlocking: ctx.modal,\n            exclude: dom.getTriggerEl(ctx),\n            defer: true,\n            onEscapeKeyDown(event) {\n              ctx.onEscapeKeyDown?.(event)\n              if (ctx.closeOnEscape) return\n              event.preventDefault()\n            },\n            onInteractOutside(event) {\n              ctx.onInteractOutside?.(event)\n              if (event.defaultPrevented) return\n              restoreFocus = !(event.detail.focusable || event.detail.contextmenu)\n              if (!ctx.closeOnInteractOutside) {\n                event.preventDefault()\n              }\n            },\n            onPointerDownOutside: ctx.onPointerDownOutside,\n            onFocusOutside: ctx.onFocusOutside,\n            persistentElements: ctx.persistentElements,\n            onDismiss() {\n              send({ type: \"CLOSE\", src: \"interact-outside\", restoreFocus })\n            },\n          })\n        },\n        proxyTabFocus(ctx) {\n          if (ctx.modal || !ctx.portalled) return\n          const getContentEl = () => dom.getContentEl(ctx)\n          return proxyTabFocus(getContentEl, {\n            triggerElement: dom.getTriggerEl(ctx),\n            defer: true,\n            onFocus(el) {\n              el.focus({ preventScroll: true })\n            },\n          })\n        },\n        hideContentBelow(ctx) {\n          if (!ctx.modal) return\n          const getElements = () => [dom.getContentEl(ctx), dom.getTriggerEl(ctx)]\n          return ariaHidden(getElements, { defer: true })\n        },\n        preventScroll(ctx) {\n          if (!ctx.modal) return\n          return preventBodyScroll(dom.getDoc(ctx))\n        },\n        trapFocus(ctx) {\n          if (!ctx.modal) return\n          let trap: FocusTrap | undefined\n          nextTick(() => {\n            const contentEl = dom.getContentEl(ctx)\n            if (!contentEl) return\n            trap = createFocusTrap(contentEl, {\n              escapeDeactivates: false,\n              allowOutsideClick: true,\n              preventScroll: true,\n              returnFocusOnDeactivate: true,\n              document: dom.getDoc(ctx),\n              fallbackFocus: contentEl,\n              initialFocus: getInitialFocus({\n                root: dom.getContentEl(ctx),\n                getInitialEl: ctx.initialFocusEl,\n                enabled: ctx.autoFocus,\n              }),\n            })\n\n            try {\n              trap.activate()\n            } catch {}\n          })\n          return () => trap?.deactivate()\n        },\n      },\n      actions: {\n        reposition(ctx, evt) {\n          const anchorEl = dom.getAnchorEl(ctx) ?? dom.getTriggerEl(ctx)\n          const getPositionerEl = () => dom.getPositionerEl(ctx)\n          getPlacement(anchorEl, getPositionerEl, {\n            ...ctx.positioning,\n            ...evt.options,\n            defer: true,\n            listeners: false,\n            onComplete(data) {\n              ctx.currentPlacement = data.placement\n            },\n          })\n        },\n        checkRenderedElements(ctx) {\n          raf(() => {\n            Object.assign(ctx.renderedElements, {\n              title: !!dom.getTitleEl(ctx),\n              description: !!dom.getDescriptionEl(ctx),\n            })\n          })\n        },\n        setInitialFocus(ctx) {\n          // handoff to `trapFocus` activity for initial focus\n          if (ctx.modal) return\n          raf(() => {\n            const element = getInitialFocus({\n              root: dom.getContentEl(ctx),\n              getInitialEl: ctx.initialFocusEl,\n              enabled: ctx.autoFocus,\n            })\n            element?.focus({ preventScroll: true })\n          })\n        },\n        setFinalFocus(ctx, evt) {\n          if (!evt.restoreFocus) return\n          raf(() => {\n            const element = dom.getTriggerEl(ctx)\n            element?.focus({ preventScroll: true })\n          })\n        },\n        invokeOnOpen(ctx) {\n          ctx.onOpenChange?.({ open: true })\n        },\n        invokeOnClose(ctx) {\n          ctx.onOpenChange?.({ open: false })\n        },\n        toggleVisibility(ctx, evt, { send }) {\n          send({ type: ctx.open ? \"CONTROLLED.OPEN\" : \"CONTROLLED.CLOSE\", previousEvent: evt })\n        },\n      },\n    },\n  )\n}\n","import { createProps } from \"@zag-js/types\"\nimport { createSplitProps } from \"@zag-js/utils\"\nimport type { UserDefinedContext } from \"./popover.types\"\n\nexport const props = createProps<UserDefinedContext>()([\n  \"autoFocus\",\n  \"closeOnEscape\",\n  \"closeOnInteractOutside\",\n  \"dir\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"initialFocusEl\",\n  \"modal\",\n  \"onEscapeKeyDown\",\n  \"onFocusOutside\",\n  \"onInteractOutside\",\n  \"onOpenChange\",\n  \"onPointerDownOutside\",\n  \"open.controlled\",\n  \"open\",\n  \"persistentElements\",\n  \"portalled\",\n  \"positioning\",\n])\n\nexport const splitProps = createSplitProps<Partial<UserDefinedContext>>(props)\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}